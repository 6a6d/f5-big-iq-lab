<!DOCTYPE html>
<head>
  
  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-PPZPQ6');</script>
  <!-- End Google Tag Manager -->
    <title>Lab 1.1: Modifying an existing APM access policy using VPE</title>
  

  <meta charset="utf-8">
  <!-- Twitter Bootstrap viewport setting -->
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <!-- F5 metadata -->
  <meta name="title" content="Lab 1.1: Modifying an existing APM access policy using VPE"/>
  <meta name="product" content="F5 BIG-IQ &amp; Cloud Edition Lab"/>
  <meta name="version" content=""/>
  <meta name="updated_date"  content="2019-07-26 04:33:11"/>
  <meta name="archived" content="Archived documents excluded"/>
  <meta name="doc_type" content="Manual"/>
  <meta name="lifecycle" content="release"/>
  <meta name="F5 BIG-IQ &amp; Cloud Edition Lab" content=""/>


  

  
  <link href="https://cdn.f5.com/favicon.ico" rel="icon">

</head>
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Lab 1.1: Modifying an existing APM access policy using VPE &#8212; F5 BIG-IQ &amp; Cloud Edition Lab  documentation</title>
    <link rel="stylesheet" href="../../_static/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/f5_agility_theme.css" />
    <link rel="stylesheet" href="/assets/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="/assets/css/f5.css" type="text/css" />
    <link rel="stylesheet" href="/assets/css/f5-theme.css" type="text/css" />
    <link rel="stylesheet" href="/assets/css/CoveoFullSearch.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/custom.css" type="text/css" />
    <link rel="stylesheet" href="https://use.fontawesome.com/21fb8a09c3.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/language_data.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Lab 1.2: Create a new VPN Access profile" href="lab2.html" />
    <link rel="prev" title="Module 3: APM access and per-request policies" href="module3.html" />

  
    

  
  </head><body>
  <div id="clouddocs-header"></div>

    <div id="sidebar" class="section-nav">
      
      <!--  version selector ------------------>
      <div id="version_selector_wrapper">
      </div>
      <nav class="nav-sidebartoc">

        
         <h5>F5 BIG-IQ & Cloud Edition Lab  </h5>
        
<div id="searchbox" role="search">
  <form class="search" action="../../search.html" method="get">
    <input type="text" class="search" name="q" placeholder=" Search..." />
    <button type="submit" class="btn btn-info navbar-btn"><i class="fa fa-search"></i></button>
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        <hr>
        <span class="nav-sidebartoc">
            <p class="caption"><span class="caption-text">Contents/Lab:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../class1/class1.html">Class 1: BIG-IQ Application Management and AS3 (Cloud Edition)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../class2/class2.html">Class 2: BIG-IQ Deployment with auto-scale on AWS, Azure &amp; VMware (Cloud Edition)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../class3/class3.html">Class 3:  BIG-IQ Analytics (Cloud Edition)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../class4/class4.html">Class 4: BIG-IQ Platform</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../class5/class5.html">Class 5: BIG-IQ Device Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../class6/class6.html">Class 6: BIG-IQ ADC Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../class7/class7.html">Class 7: BIG-IQ Application Firewall Manager (AFM)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../class8/class8.html">Class 8: BIG-IQ Application Security Manager (ASM)</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../class9.html">Class 9: BIG-IQ Access Policy Manager (APM)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../class10/class10.html">Class 10: BIG-IQ DNS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../class11/class11.html">Class 11: BIG-IQ DDoS Monitoring and Dashboard</a></li>
</ul>

        </span><!-- Use this file to add extra links to the bottom of the ToC sidebar -->
<hr>
  <span class="nav-sidebartoc">
 <!-- insert content here -->
  </span>
      </nav>
    </div>


    <div id="right-sidebar">
      <h7 style="font-weight:normal">On this page:</h7>
      <nav class="nav-sidebartoc">
        <span class="nav-sidebartoc">
            <ul>
<li><a class="reference internal" href="#">Lab 1.1: Modifying an existing APM access policy using VPE</a><ul>
<li><a class="reference internal" href="#access-policy-review">Access Policy Review</a></li>
<li><a class="reference internal" href="#location-specific-object-modification">Location Specific Object Modification</a></li>
<li><a class="reference internal" href="#modifying-an-existing-apm-access-policy-using-vpe">Modifying an existing APM access policy using VPE</a></li>
</ul>
</li>
</ul>

         </span>
      </nav>
    </div>





  
  <div class="main active" id="content" >
    <article class="docs-container site-article-inner">
              <!-- custom breadcrumb -->
        <h5>
            <a href="../../index.html">F5 BIG-IQ &amp; Cloud Edition Lab</a>
              &gt; <a href="../class9.html">Class 9: BIG-IQ Access Policy Manager (APM)</a>
              &gt; <a href="module3.html">Module 3: APM access and per-request policies</a>

          <span class="right">
             <a href="../../_sources/class9/module3/lab1.rst.txt" rel="nofollow">Source</a> |
             <a href="https://github.com/f5devcentral/f5-big-iq-lab">Edit on <i class="fa fa-github" aria-hidden="true"></i></a>
          </span>
        </h5>
        <!-- end custom breadcrumb -->
      


    <!--a title="Export PDF" id="export-pdf" class="btn btn btn-link pull-right">View PDF</a-->
    <button type="button" id="export-pdf" class="btn btn-link right">PDF</button>


    
     
         <div class="sidebar" id="version-warning" style="display: none;">
           <p class="first sidebar-title">
           <span class="icon fa fa-info-circle fa-lg"></span> Version notice:</p>
           <p class="last" id="currentVersion"></p>
          </div>


     <div role="main">
        
  <div class="section" id="lab-1-1-modifying-an-existing-apm-access-policy-using-vpe">
<h1>Lab 1.1: Modifying an existing APM access policy using VPE<a class="headerlink" href="#lab-1-1-modifying-an-existing-apm-access-policy-using-vpe" title="Permalink to this headline">¶</a></h1>
<div class="section" id="access-policy-review">
<h2>Access Policy Review<a class="headerlink" href="#access-policy-review" title="Permalink to this headline">¶</a></h2>
<p>Navigate to Configuration Access Access Groups BostonAG Access Policies
Per-Session Policies TestAccessProfile</p>
<p><a class="reference internal" href="../../_images/image66.png"><img alt="image5" src="../../_images/image66.png" style="width: 5.63056in; height: 2.99033in;" /></a></p>
<p>The access policy will be displayed in a new screen as shown below.
Compare the Access policy in BIG IQ with the policy in BIG IP source
device and ensure that they are exactly same. Open the browser shortcut
for the BIG-IP01 in a new tab from Chrome.</p>
<p><a class="reference internal" href="../../_images/image76.png"><img alt="image6" src="../../_images/image76.png" style="width: 2.47222in; height: 2.09016in;" /></a> <a class="reference internal" href="../../_images/image86.png"><img alt="image7" src="../../_images/image86.png" style="width: 3.38525in; height: 1.15301in;" /></a></p>
</div>
<div class="section" id="location-specific-object-modification">
<h2>Location Specific Object Modification<a class="headerlink" href="#location-specific-object-modification" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>Navigate to Configuration Access Access Groups BostonAG
Authentication Active Directory Active Directory</p>
<blockquote>
<div><p><a class="reference internal" href="../../_images/image914.png"><img alt="image8" src="../../_images/image914.png" style="width: 6.50000in; height: 3.60625in;" /></a></p>
<p>LSO or Location Specific Objects are objects within an access
profile/policy that relate to more specific geographic areas
normally and are not shared between all devices by default to
prevent misconfigurations. As an example, AAA servers are located in
all office/data centers globally however if an end user is accessing
a policy on an APM in Europe we wouldn’t want their authentication
requests to be sent over a WAN link to some Domain Controller in
another country and cause a tremendous delay for that user.</p>
</div></blockquote>
</li>
<li><p>Click the check box for the FrogPolicy-olympus-ad for the BIGIP02
device.</p></li>
<li><p>Click the Mark Shared button and accept the warning</p>
<blockquote>
<div><p><a class="reference internal" href="../../_images/image105.png"><img alt="image9" src="../../_images/image105.png" style="width: 6.50000in; height: 1.68889in;" /></a></p>
<p>This will move the object from the device specific location to the
Shared resources location.</p>
</div></blockquote>
</li>
<li><p>Click on the AAA object to edit the properties</p></li>
<li><p>Change the Timeout value from 15 to 1500</p></li>
<li><p>Click Save &amp; Close</p>
<blockquote>
<div><p><a class="reference internal" href="../../_images/image118.png"><img alt="image10" src="../../_images/image118.png" style="width: 5.08264in; height: 3.92222in;" /></a></p>
<p>BIG IQ provides the ability to transition LSO objects to Shared
Objects and vice versa. When an LSO object is made Shared it will
have the same configuration across all the BIG IPs after deployment.</p>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="modifying-an-existing-apm-access-policy-using-vpe">
<h2>Modifying an existing APM access policy using VPE<a class="headerlink" href="#modifying-an-existing-apm-access-policy-using-vpe" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Navigate to ConfigurationAccessAccess Groups</p></li>
<li><p>Select BostonAG</p></li>
</ul>
<p><a class="reference internal" href="../../_images/image125.png"><img alt="image11" src="../../_images/image125.png" style="width: 4.32020in; height: 2.10656in;" /></a></p>
<p>Click on Access Policies -&gt; Per Session Policies:</p>
<p>Select TestAccessProfile and add the following objects:</p>
<ul class="simple">
<li><p>Logon page (accept default settings)</p></li>
<li><p>AD Auth using FrogPolicy-Olympus-AD</p></li>
<li><p>If AD Auth successful, your allowed access</p></li>
</ul>
<p><a class="reference internal" href="../../_images/image135.png"><img alt="image12" src="../../_images/image135.png" style="width: 6.50000in; height: 2.52917in;" /></a></p>
<p>Start by hovering the mouse over the blue line in the policy flow
between the Start and Ending points and clicking the Green Plus sign.</p>
<p><a class="reference internal" href="../../_images/image76.png"><img alt="image13" src="../../_images/image76.png" style="width: 2.47222in; height: 2.09016in;" /></a></p>
<p>Now select the “Logon Page” object on the right side of the pop up
window. Then click “Save” on the next pop up window.</p>
<p><a class="reference internal" href="../../_images/image146.png"><img alt="image14" src="../../_images/image146.png" style="width: 4.78697in; height: 2.31967in;" /></a></p>
<p>The result should look like the picture below.</p>
<p><a class="reference internal" href="../../_images/image156.png"><img alt="image15" src="../../_images/image156.png" style="width: 3.07377in; height: 1.79768in;" /></a></p>
<p>Now repeat the steps by hovering the mouse on the blue line between the
Logon Page object and the Ending Deny and click the Green plus sign to
add the Authentication object of AD Auth.</p>
<p><a class="reference internal" href="../../_images/image166.png"><img alt="image16" src="../../_images/image166.png" style="width: 4.77869in; height: 2.19636in;" /></a></p>
<p>Now click the Server drop down to select FrogPolicy-olympus-ad and then
click “Save”.</p>
<p><a class="reference internal" href="../../_images/image175.png"><img alt="image17" src="../../_images/image175.png" style="width: 3.31246in; height: 2.75083in;" /></a></p>
<p>Change the Ending DENY to ALLOW.</p>
<p>Notice the Yellow Banner warning that there are un-saved changes. Click
the Save button at the bottom of the profile page. Click OK on the
Policy Save Conformation pop up window.</p>
<p><a class="reference internal" href="../../_images/image185.png"><img alt="image18" src="../../_images/image185.png" style="width: 4.09836in; height: 1.84640in;" /></a></p>
<p>After modifying the access profile, go to “Deployment tab- &gt; Evaluate &amp;
Deploy -&gt; Access”</p>
<p>Click on Create in Evaluation section. Enter a name in the Name Field
then click the Checkbox in the Available section of Target Devices and
Click the arrow to the right to move both BOS BIGIP deivces to the
Selected area and then click the Create button at the bottom.</p>
<p><a class="reference internal" href="../../_images/image193.png"><img alt="image19" src="../../_images/image193.png" style="width: 6.27138in; height: 3.25000in;" /></a></p>
<p>The BIG-IQ will now start evaluating the configurations on the BIG-IP
devices and provide a comparison of the changes between the stored
configuration within the BIG-IQ versus the current running
configurations on the BIG-IP systems. When the evaluation completes you
will see a screen like the one below. Click the “VIEW” link under the
Access column.</p>
<p><a class="reference internal" href="../../_images/image204.png"><img alt="image20" src="../../_images/image204.png" style="width: 6.50000in; height: 1.39028in;" /></a></p>
<p>In the evaluation section, you will be able to view the added/changed
items. After reviewing click the Cancel button at the bottom of the pop
up window.</p>
<p><a class="reference internal" href="../../_images/image214.png"><img alt="image21" src="../../_images/image214.png" style="width: 5.69672in; height: 2.82593in;" /></a></p>
<p>Now click the Deploy button in the Evaluations section and wait for the
Deployment tast to complete.</p>
<p><a class="reference internal" href="../../_images/image224.png"><img alt="image22" src="../../_images/image224.png" style="width: 3.99163in; height: 1.47222in;" /></a></p>
<p>You can verify on BigIP that the access profile changes were pushed:</p>
<p><a class="reference internal" href="../../_images/image233.png"><img alt="image23" src="../../_images/image233.png" style="width: 6.49097in; height: 2.34236in;" /></a></p>
</div>
</div>


     </div>
    
     <div class="row next-prev-btn-row">
       <div class="col-lg-12">
       
        <a href="module3.html" title="Module 3: APM access and per-request policies" accesskey="p" class="btn btn-primary left"><i class="fa fa-arrow-circle-left" aria-hidden="true"></i> Previous</a>
       
       
          <a href="lab2.html" title="Lab 1.2: Create a new VPN Access profile" accesskey="n" class="btn btn-primary right">Next <i class="fa fa-arrow-circle-right" aria-hidden="true"></i></a>
       
     </div>
     </div>
    

    </article>
  </div>

</div>


  <div id="clouddocs-footer"></div>
  <!-- Bootstrap core JavaScript
  ================================================== -->
  <!-- Placed at the end of the document so the pages load faster -->

  <script src="../../_static/js/index.js"></script>
  <script src="../../_static/js/jquery.appear.js"></script>
  <script src="../../_static/js/printThis.js"></script>
  <script src="/assets/js/bootstrap.min.js"></script>
  <script src="/assets/js/clouddocs.js"></script>
  <script src="/assets/js/CoveoJsSearch.Lazy.min.js"></script>
  </body>
</html>